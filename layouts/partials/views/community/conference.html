{{/* æŒ‰å¹´ä»½åˆ†ç»„ä¼šè®®æ•°æ® */}}
{{ $grouped := dict }}
{{ $years := slice }}
{{ range .Items }}
  {{ $year := (time .Date).Format "2006" }}
  {{ $grouped = merge $grouped (dict $year (append (index $grouped $year | default slice) .)) }}
  {{ if not (in $years $year) }}
    {{ $years = $years | append $year }}
  {{ end }}
{{ end }}

{{/* æŒ‰å¹´ä»½å€’åºæ’åˆ— */}}
{{ $sortedYears := sort $years "desc" }}

{{/* æ¸²æŸ“æ¯å¹´çš„ä¼šè®® */}}
{{ range $year := $sortedYears }}
  <h2 class="text-lg font-semibold mt-6 mb-2 border-b border-gray-300 pb-1">{{ $year }}</h2>
  <ul class="list-disc list-inside space-y-2">
    {{ range index $grouped $year }}
      <li>
        <span class="font-semibold">{{ .Title }}</span>
        {{ with .Params.event }}
          â€” <em>{{ . }}</em>
        {{ end }}
        <br>
        {{ with .Params.location }}
          ğŸ“ {{ . }}
        {{ end }}
        {{ with .Date }}
          Â· {{ dateFormat "January 2, 2006" . }}
        {{ end }}
        {{ if and .Params.date_end (ne .Date .Params.date_end) }}
          - {{ dateFormat "January 2, 2006" .Params.date_end }}
        {{ end }}
        <br>
        {{ with .Params.presentation }}
          <span class="inline-block bg-blue-100 text-blue-800 text-xs font-medium px-2 py-1 rounded">{{ . }}</span>
        {{ end }}
      </li>
    {{ end }}
  </ul>
{{ end }}
