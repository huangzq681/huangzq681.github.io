{{/* è°ƒè¯•ç‰ˆæœ¬ - æ˜¾ç¤ºæ‰€æœ‰é¡¹ç›®ä¿¡æ¯ */}}

{{ $item := .item }}

{{ if $item }}
  {{/* æ˜¾ç¤ºè°ƒè¯•ä¿¡æ¯ */}}
  <div class="bg-gray-100 border rounded p-2 mb-2 text-xs">
    <strong>è°ƒè¯•ä¿¡æ¯:</strong>
    <br>Title: {{ $item.Title }}
    <br>Type: {{ $item.Type }}
    <br>Section: {{ $item.Section }}
    {{ if $item.File }}
      <br>File Path: {{ $item.File.Path }}
      <br>File Dir: {{ $item.File.Dir }}
    {{ else }}
      <br>File: æ— æ–‡ä»¶ä¿¡æ¯
    {{ end }}
    <br>Has Event: {{ if $item.Params.event }}Yes ({{ $item.Params.event }}){{ else }}No{{ end }}
    <br>Has Location: {{ if $item.Params.location }}Yes{{ else }}No{{ end }}
    <br>Has Presentation: {{ if $item.Params.presentation }}Yes{{ else }}No{{ end }}
  </div>

  {{/* æ£€æŸ¥é¡¹ç›®æ˜¯å¦å±äº talk ç±»å‹ */}}
  {{ $isValidTalk := false }}
  {{ $reasons := slice }}

  {{/* æ–¹æ³•1: æ£€æŸ¥æ–‡ä»¶è·¯å¾„ */}}
  {{ if and $item.File (strings.Contains $item.File.Path "talk/") }}
    {{ $isValidTalk = true }}
    {{ $reasons = $reasons | append "æ–‡ä»¶è·¯å¾„åŒ…å«talk/" }}
  {{ end }}
  
  {{/* æ–¹æ³•2: æ£€æŸ¥ Section */}}
  {{ if eq $item.Section "talk" }}
    {{ $isValidTalk = true }}
    {{ $reasons = $reasons | append "Sectionæ˜¯talk" }}
  {{ end }}
  
  {{/* æ–¹æ³•3: æ£€æŸ¥ Type */}}
  {{ if eq $item.Type "talk" }}
    {{ $isValidTalk = true }}
    {{ $reasons = $reasons | append "Typeæ˜¯talk" }}
  {{ end }}
  
  {{/* æ–¹æ³•4: æ£€æŸ¥æ˜¯å¦æœ‰ä¼šè®®ç›¸å…³çš„å‚æ•° */}}
  {{ if and $item.Params.event (or $item.Params.location $item.Params.presentation) }}
    {{ $isValidTalk = true }}
    {{ $reasons = $reasons | append "æœ‰ä¼šè®®ç›¸å…³å‚æ•°" }}
  {{ end }}

  <div class="text-xs text-blue-600 mb-2">
    ç¬¦åˆæ¡ä»¶: {{ if $isValidTalk }}âœ… Yes{{ else }}âŒ No{{ end }}
    {{ if $reasons }}
      <br>åŸå› : {{ delimit $reasons ", " }}
    {{ end }}
  </div>

  {{ if $isValidTalk }}
    <div class="mb-4 border border-green-200 rounded p-3">
      <div class="border-l-4 border-blue-500 pl-4">
        <h3 class="font-semibold text-lg">{{ $item.Title }}</h3>
        
        {{ with $item.Params.event }}
          <p class="text-gray-600 italic">{{ . }}</p>
        {{ end }}
        
        <div class="text-sm text-gray-500 mt-1">
          {{ with $item.Params.location }}
            <span>ğŸ“ {{ . }}</span>
          {{ end }}
          
          {{ with $item.Date }}
            <span class="ml-2">ğŸ“… {{ dateFormat "January 2, 2006" . }}</span>
          {{ end }}
          
          {{ if and $item.Params.date_end (ne $item.Date $item.Params.date_end) }}
            {{ $endDate := time $item.Params.date_end }}
            <span> - {{ dateFormat "January 2, 2006" $endDate }}</span>
          {{ end }}
        </div>
        
        {{ with $item.Params.presentation }}
          <div class="mt-2">
            <span class="inline-block bg-blue-100 text-blue-800 text-xs font-medium px-2 py-1 rounded">
              {{ . }}
            </span>
          </div>
        {{ end }}
        
        {{ with $item.Summary }}
          <p class="text-sm text-gray-600 mt-2">{{ . }}</p>
        {{ end }}
      </div>
    </div>
  {{ else }}
    <div class="mb-4 border border-red-200 rounded p-3 bg-red-50">
      <p class="text-red-600 text-sm">âŒ æ­¤é¡¹ç›®ä¸ç¬¦åˆtalkæ¡ä»¶ï¼Œå·²è¿‡æ»¤</p>
    </div>
  {{ end }}
{{ else }}
  <div class="bg-yellow-50 border border-yellow-200 rounded p-4">
    <p class="text-yellow-800">æ²¡æœ‰æ‰¾åˆ°é¡¹ç›®æ•°æ®ã€‚</p>
  </div>
{{ end }}

